import{r as t,e as M}from"./vendor-YL3_wyph.js";function D(){return(D=Object.assign||function(e){for(var f=1;f<arguments.length;f++){var l=arguments[f];for(var v in l)Object.prototype.hasOwnProperty.call(l,v)&&(e[v]=l[v])}return e}).apply(this,arguments)}function ce(e,f){(f==null||f>e.length)&&(f=e.length);for(var l=0,v=new Array(f);l<f;l++)v[l]=e[l];return v}var re=window;t.memo(function(e){var f=e.state,l=f===void 0?"":f,v=e.client_id,P=e.className,w=e.redirect_uri,S=e.scope,_=S===void 0?"profile":S,N=e.isOnlyGetToken,g=N!==void 0&&N,R=e.scope_data,L=R===void 0?{profile:{essential:!0}}:R,j=e.response_type,I=j===void 0?"token":j,b=e.children,c=e.onReject,d=e.onResolve,a=e.onLoginStart,u=t.useRef(null),m=t.useState(!1),T=m[0],y=m[1];t.useEffect(function(){!T&&r()},[T]),t.useEffect(function(){return function(){u.current&&u.current.remove()}},[]);var k=t.useCallback(function(){return!!document.getElementById("amazon-login")},[]),s=t.useCallback(function(p,C,H,F,E){C===void 0&&(C="script");var z=p.createElement(C);z.id=H,z.src=F,z.async=!0,z.defer=!0;var O=document.getElementsByTagName("script")[0];u.current=z,O&&O.parentNode&&O.parentNode.insertBefore(z,O),z.onload=E},[]),i=t.useCallback(function(p){try{return fetch("https://api.amazon.com/user/profile",{headers:{Authorization:"Bearer "+p.access_token}}).then(function(C){return C.json()}).then(function(C){d({provider:"amazon",data:D({},C,p)})}).catch(function(C){c(C)}).finally(function(){}),Promise.resolve()}catch(C){return Promise.reject(C)}},[c,d]),n=t.useCallback(function(p){g?d({provider:"amazon",data:D({},p)}):i(p)},[i,d,g]),o=t.useCallback(function(p){c(p)},[c]),r=t.useCallback(function(){k()?y(!0):s(document,"script","amazon-login","https://assets.loginwithamazon.com/sdk/na/login1.js",function(){re.amazon.Login.setClientId(v),y(!0)})},[k,v,s]),h=t.useCallback(function(){T&&(re.amazon?(a&&a(),re.amazon.Login.authorize({scope:_,scope_data:L,response_type:I,redirect_uri:w,state:l},function(p){p.error?o(p.error):n(p)})):(r(),c("Google SDK isn't loaded!")))},[r,_,l,c,L,T,o,a,w,I,n]);return M.createElement("div",{className:P,onClick:h},b)});var ie=window,de=t.memo(function(e){var f=e.appId,l=e.scope,v=l===void 0?"email,public_profile":l,P=e.state,w=P===void 0||P,S=e.xfbml,_=S===void 0||S,N=e.cookie,g=N===void 0||N,R=e.version,L=R===void 0?"v2.7":R,j=e.language,I=j===void 0?"en_EN":j,b=e.auth_type,c=b===void 0?"":b,d=e.className,a=e.onLoginStart,u=e.onReject,m=e.onResolve,T=e.redirect_uri,y=e.fieldsProfile,k=y===void 0?"id,first_name,last_name,middle_name,name,name_format,picture,short_name,email,gender":y,s=e.response_type,i=s===void 0?"code":s,n=e.return_scopes,o=n===void 0||n,r=e.isOnlyGetToken,h=r!==void 0&&r,p=e.children,C=t.useRef(null),H=t.useState(!1),F=H[0],E=H[1],z=t.useState(!1),O=z[0],x=z[1];t.useEffect(function(){!F&&X()},[F]),t.useEffect(function(){return function(){C.current&&C.current.remove()}},[]);var B=t.useCallback(function(A,K){var $=A.createElement("script");$.id="facebook-jssdk",$.src="https://connect.facebook.net/en_EN/sdk.js";var G=A.getElementsByTagName("script")[0];G&&G.parentNode&&G.parentNode.insertBefore($,G),K()},[]),V=t.useCallback(function(){return!!document.getElementById("facebook-jssdk")},[]),q=t.useCallback(function(A,K){var $=window;$.fbAsyncInit=function(){$.FB&&$.FB.init(D({},A)),E(!0);var G=K.getElementById("fb-root");G||((G=K.createElement("div")).id="fb-root",K.body.appendChild(G)),C.current=G}},[]),Z=t.useCallback(function(A){ie.FB.api("/me",{locale:I,fields:k},function(K){m({provider:"facebook",data:D({},A,K)})})},[k,I,m]),ee=t.useCallback(function(A){console.log("ðŸš€ ~ file: index.tsx:127 ~ response:",A),A.authResponse?h?m({provider:"facebook",data:D({},A.authResponse)}):Z(A.authResponse):u(A),x(!1)},[Z,h,u,m]),X=t.useCallback(function(){V()?E(!0):B(document,function(){q({appId:f,xfbml:_,version:L,state:w,cookie:g,redirect_uri:T,response_type:i},document)})},[w,f,_,g,L,q,T,i,B,V]),Y=t.useCallback(function(){F&&!O&&(ie.FB?(x(!0),a&&a(),ie.FB.login(ee,{scope:v,return_scopes:o,auth_type:c})):(X(),u("Fb isn't loaded!"),x(!1)))},[X,v,u,c,F,a,O,o,ee]);return M.createElement("div",{className:d,onClick:Y},p)}),J="875c0462-6309-4ddf-9889-5227b1acc82c",oe=window,ue=t.memo(function(e){var f=e.client_id,l=e.scope,v=l===void 0?"https://www.googleapis.com/auth/userinfo.profile":l,P=e.prompt,w=P===void 0?"select_account":P,S=e.typeResponse,_=S===void 0?"accessToken":S,N=e.ux_mode,g=e.className,R=g===void 0?"":g,L=e.login_hint,j=L===void 0?"":L,I=e.access_type,b=I===void 0?"online":I,c=e.onLoginStart,d=e.onReject,a=e.onResolve,u=e.redirect_uri,m=u===void 0?"/":u,T=e.auto_select,y=T!==void 0&&T,k=e.isOnlyGetToken,s=k!==void 0&&k,i=e.cookie_policy,n=i===void 0?"single_host_origin":i,o=e.hosted_domain,r=o===void 0?"":o,h=e.discoveryDocs,p=h===void 0?"":h,C=e.children,H=e.fetch_basic_profile,F=H===void 0||H,E=t.useRef(null),z=t.useState(!1),O=z[0],x=z[1],B=t.useState(null),V=B[0],q=B[1];t.useEffect(function(){!O&&K()},[O]),t.useEffect(function(){return function(){E.current&&E.current.remove()}},[]);var Z=t.useCallback(function(){return!!document.getElementById("google-login")},[]),ee=t.useCallback(function(G,Q,U,te,se){Q===void 0&&(Q="script");var W=G.createElement(Q);W.id=U,W.src=te,W.async=!0,W.defer=!0;var ne=document.getElementsByTagName("script")[0];E.current=W,ne&&ne.parentNode&&ne.parentNode.insertBefore(W,ne),W.onload=se},[]),X=t.useCallback(function(G){if(_==="accessToken"){var Q=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":J,Authorization:"Bearer "+G.access_token});fetch("https://cors.bridged.cc/https://www.googleapis.com/oauth2/v3/userinfo?alt=json",{method:"GET",headers:Q}).then(function(U){return U.json()}).then(function(U){var te=D({},G,U);a({provider:"google",data:te})}).catch(function(U){d(U)})}else fetch("https://www.googleapis.com/oauth2/v3/tokeninfo?id_token="+G.credential,{method:"GET"}).then(function(U){return U.json()}).then(function(U){var te=D({},G,U);a({provider:"google",data:te})}).catch(function(U){d(U)})},[_,d,a]),Y=t.useCallback(function(G){G&&b==="offline"||s?a({provider:"google",data:G}):X(G)},[b,s,X,a]),A=t.useCallback(function(G){d({provider:"google",data:G})},[d]),K=t.useCallback(function(){Z()?x(!0):ee(document,"script","google-login","https://accounts.google.com/gsi/client",function(){var G={client_id:f,ux_mode:N},Q=null;if(_==="idToken")oe.google.accounts.id.initialize(D({},G,{auto_select:y,prompt:"select_account",login_uri:m,callback:Y,native_callback:Y,error_callback:A}));else{var U=D({},G,{scope:v,prompt:w,login_hint:j,access_type:b,hosted_domain:r,redirect_uri:m,cookie_policy:n,discoveryDocs:p,immediate:!0,fetch_basic_profile:F,callback:Y,error_callback:A});Q=b==="offline"?oe.google.accounts.oauth2.initCodeClient(U):oe.google.accounts.oauth2.initTokenClient(U)}Q&&q(Q),x(!0)})},[v,w,N,f,j,y,b,m,_,p,n,r,Y,A,F,ee,Z]),$=t.useCallback(function(){O&&(oe.google?(c&&c(),V?b==="offline"?V.requestCode():V.requestAccessToken():oe.google.accounts.id.prompt()):(K(),d("Google SDK isn't loaded!")))},[b,V,O,K,c,d]);return M.createElement("div",{className:R,onClick:$},C)});t.memo(function(e){var f=e.state,l=f===void 0?"":f,v=e.scope,P=v===void 0?"repo,gist":v,w=e.client_id,S=e.client_secret,_=e.className,N=_===void 0?"":_,g=e.redirect_uri,R=e.allow_signup,L=R!==void 0&&R,j=e.isOnlyGetToken,I=j!==void 0&&j,b=e.isOnlyGetCode,c=b!==void 0&&b,d=e.children,a=e.onReject,u=e.onResolve,m=e.onLoginStart;t.useEffect(function(){var n=new URL(window.location.href),o=n.searchParams.get("code"),r=n.searchParams.get("state");r!=null&&r.includes("_github")&&o&&(localStorage.setItem("github",o),window.close())},[]);var T=t.useCallback(function(n){fetch("https://cors.bridged.cc/https://api.github.com//user",{method:"GET",headers:{Authorization:"token "+n.access_token,"x-cors-grida-api-key":J}}).then(function(o){return o.json()}).then(function(o){u({provider:"github",data:D({},o,n)})}).catch(function(o){a(o)})},[a,u]),y=t.useCallback(function(n){if(c)u({provider:"github",data:{code:n}});else{var o={code:n,state:l,redirect_uri:g,client_id:w,client_secret:S},r=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":J});fetch("https://cors.bridged.cc/https://github.com/login/oauth/access_token",{method:"POST",headers:r,body:new URLSearchParams(o)}).then(function(h){return h.text()}).then(function(h){for(var p,C={},H=function(E,z){var O;if(typeof Symbol>"u"||E[Symbol.iterator]==null){if(Array.isArray(E)||(O=function(B,V){if(B){if(typeof B=="string")return ce(B,void 0);var q=Object.prototype.toString.call(B).slice(8,-1);return q==="Object"&&B.constructor&&(q=B.constructor.name),q==="Map"||q==="Set"?Array.from(B):q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(q)?ce(B,void 0):void 0}}(E))){O&&(E=O);var x=0;return function(){return x>=E.length?{done:!0}:{done:!1,value:E[x++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return(O=E[Symbol.iterator]()).next.bind(O)}(new URLSearchParams(h));!(p=H()).done;){var F=p.value;C[F[0]]=F[1]}C.access_token?I?u({provider:"github",data:C}):T(C):a("no data")}).catch(function(h){a(h)})}},[l,a,T,u,w,g,S,c,I]),k=t.useCallback(function(n){var o=n.type,r=n.code,h=n.provider;try{return Promise.resolve(o==="code"&&h==="github"&&r&&y(r))}catch(p){return Promise.reject(p)}},[y]),s=t.useCallback(function(){window.removeEventListener("storage",s,!1);var n=localStorage.getItem("github");n&&(k({provider:"github",type:"code",code:n}),localStorage.removeItem("github"))},[k]),i=t.useCallback(function(){m&&m(),window.addEventListener("storage",s,!1);var n=window.screen.width/2-225,o=window.screen.height/2-365;window.open("https://github.com/login/oauth/authorize?client_id="+w+"&scope="+P+"&state="+l+"_github&redirect_uri="+g+"&allow_signup="+L,"Github","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+o+", left="+n)},[P,l,w,g,L,m,s]);return M.createElement("div",{className:N,onClick:i},d)});t.memo(function(e){var f=e.state,l=f===void 0?"":f,v=e.client_id,P=e.client_secret,w=e.className,S=e.redirect_uri,_=e.fields,N=_===void 0?"id,username,account_type,media_count":_,g=e.scope,R=g===void 0?"user_profile,user_media":g,L=e.response_type,j=L===void 0?"code":L,I=e.isOnlyGetCode,b=I!==void 0&&I,c=e.isOnlyGetToken,d=c!==void 0&&c,a=e.children,u=e.onReject,m=e.onResolve,T=e.onLoginStart;t.useEffect(function(){var o=new URL(window.location.href),r=o.searchParams.get("code"),h=o.searchParams.get("state");h!=null&&h.includes("_instagram")&&r&&(localStorage.setItem("instagram",r),window.close())},[]);var y=t.useCallback(function(o){fetch("https://cors.bridged.cc/https://graph.instagram.com//me?fields="+N+"&access_token="+o.access_token,{method:"GET",headers:{"x-cors-grida-api-key":J}}).then(function(r){return r.json()}).then(function(r){m({provider:"instagram",data:D({},r,o)})}).catch(function(r){u(r)})},[N,u,m]),k=t.useCallback(function(o){if(b)m({provider:"instagram",data:{code:o}});else{var r={grant_type:"authorization_code",code:o,redirect_uri:S,client_id:v,client_secret:P},h=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":J});fetch("https://cors.bridged.cc/https://api.instagram.com/oauth/access_token",{method:"POST",headers:h,body:new URLSearchParams(r)}).then(function(p){return p.json()}).then(function(p){p.access_token?d?m({provider:"instagram",data:p}):y(p):u("no data")}).catch(function(p){u(p)}).finally(function(){})}},[u,m,y,v,S,P,b,d]),s=t.useCallback(function(o){var r=o.type,h=o.code,p=o.provider;try{return Promise.resolve(r==="code"&&p==="instagram"&&h&&k(h))}catch(C){return Promise.reject(C)}},[k]),i=t.useCallback(function(){window.removeEventListener("storage",i,!1);var o=localStorage.getItem("instagram");o&&(s({provider:"instagram",type:"code",code:o}),localStorage.removeItem("instagram"))},[s]),n=t.useCallback(function(){T&&T(),window.addEventListener("storage",i,!1);var o=window.screen.width/2-225,r=window.screen.height/2-365;window.open("https://api.instagram.com/oauth/authorize?response_type="+j+"&client_id="+v+"&scope="+R+"&state="+l+"_instagram&redirect_uri="+S,"Instagram","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+r+", left="+o)},[R,l,v,S,T,j,i]);return M.createElement("div",{className:w,onClick:n},a)});t.memo(function(e){var f=e.tenant,l=f===void 0?"common":f,v=e.state,P=v===void 0?"":v,w=e.client_id,S=e.className,_=e.redirect_uri,N=e.scope,g=N===void 0?"profile openid email":N,R=e.response_type,L=R===void 0?"code":R,j=e.response_mode,I=j===void 0?"query":j,b=e.children,c=e.code_challenge,d=c===void 0?"19cfc47c216dacba8ca23eeee817603e2ba34fe0976378662ba31688ed302fa9":c,a=e.code_challenge_method,u=a===void 0?"plain":a,m=e.prompt,T=m===void 0?"select_account":m,y=e.isOnlyGetCode,k=y!==void 0&&y,s=e.isOnlyGetToken,i=s!==void 0&&s,n=e.onLoginStart,o=e.onReject,r=e.onResolve;t.useEffect(function(){var E=new URL(window.location.href),z=E.searchParams.get("code"),O=E.searchParams.get("state");O!=null&&O.includes("_microsoft")&&z&&(localStorage.setItem("microsoft",z),window.close())},[]);var h=t.useCallback(function(E){fetch("https://graph.microsoft.com/v1.0/me",{method:"GET",headers:{Authorization:"Bearer "+E.access_token}}).then(function(z){return z.json()}).then(function(z){r({provider:"microsoft",data:D({},z,E)})}).catch(function(z){o(z)})},[o,r]),p=t.useCallback(function(E){if(k)r({provider:"microsoft",data:{code:E}});else{var z={code:E,scope:g,client_id:w,redirect_uri:_,code_verifier:d,grant_type:"authorization_code"},O=new Headers({"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"});fetch("https://login.microsoftonline.com/"+l+"/oauth2/v2.0/token",{method:"POST",headers:O,body:new URLSearchParams(z)}).then(function(x){return x.json()}).then(function(x){x.access_token?i?r({provider:"microsoft",data:x}):h(x):o("no data")}).catch(function(x){o(x)})}},[g,l,o,h,w,r,_,d,k,i]),C=t.useCallback(function(E){var z=E.type,O=E.code,x=E.provider;try{return Promise.resolve(z==="code"&&x==="microsoft"&&O&&p(O))}catch(B){return Promise.reject(B)}},[p]),H=t.useCallback(function(){window.removeEventListener("storage",H,!1);var E=localStorage.getItem("microsoft");E&&(C({provider:"microsoft",type:"code",code:E}),localStorage.removeItem("microsoft"))},[C]),F=t.useCallback(function(){n&&n(),window.addEventListener("storage",H,!1);var E=window.screen.width/2-225,z=window.screen.height/2-365;window.open("https://login.microsoftonline.com/"+l+"/oauth2/v2.0/authorize?client_id="+w+`
        &response_type=`+L+`
        &redirect_uri=`+_+`
        &response_mode=`+I+`
        &scope=`+g+`
        &state=`+P+`_microsoft
        &prompt=`+T+`
        &code_challenge=`+d+`
        &code_challenge_method=`+u,"Microsoft","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+z+", left="+E)},[g,P,T,l,w,n,_,I,L,d,H,u]);return M.createElement("div",{className:S,onClick:F},b)});var fe=t.memo(function(e){var f=e.state,l=f===void 0?"":f,v=e.scope,P=v===void 0?"r_liteprofile":v,w=e.client_id,S=e.client_secret,_=e.className,N=_===void 0?"":_,g=e.redirect_uri,R=e.response_type,L=R===void 0?"code":R,j=e.isOnlyGetCode,I=j!==void 0&&j,b=e.isOnlyGetToken,c=b!==void 0&&b,d=e.children,a=e.onLoginStart,u=e.onReject,m=e.onResolve;t.useEffect(function(){var n=new URL(window.location.href),o=n.searchParams.get("code"),r=n.searchParams.get("state");r!=null&&r.includes("_linkedin")&&o&&(localStorage.setItem("linkedin",o),window.close())},[]);var T=t.useCallback(function(n){fetch("https://api.allorigins.win/get?url="+encodeURIComponent("https://api.linkedin.com/v2/me?oauth2_access_token="+n.access_token+"&projection=(id,profilePicture(displayImage~digitalmediaAsset:playableStreams),localizedLastName, firstName,lastName,localizedFirstName)"),{method:"GET"}).then(function(o){return o.json()}).then(function(o){var r=D({},n);if(o.contents){var h=JSON.parse(o.contents);typeof n=="object"&&Object.entries(h).map(function(p){r[p[0]]=p[1]})}m({provider:"linkedin",data:r})}).catch(function(o){u(o)})},[u,m]),y=t.useCallback(function(n){if(I)m({provider:"linkedin",data:{code:n}});else{var o={code:n,grant_type:"authorization_code",redirect_uri:g,client_id:w,client_secret:S},r=new Headers({"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":J});fetch("https://cors.bridged.cc/https://www.linkedin.com/oauth/v2/accessToken",{method:"POST",headers:r,body:new URLSearchParams(o)}).then(function(h){return h.json()}).then(function(h){c?m({provider:"linkedin",data:h}):T(h)}).catch(function(h){u(h)})}},[u,m,w,T,g,S,I,c]),k=t.useCallback(function(n){var o=n.type,r=n.code,h=n.provider;try{return Promise.resolve(o==="code"&&h==="linkedin"&&r&&y(r))}catch(p){return Promise.reject(p)}},[y]),s=t.useCallback(function(){window.removeEventListener("storage",s,!1);var n=localStorage.getItem("linkedin");n&&(k({provider:"linkedin",type:"code",code:n}),localStorage.removeItem("linkedin"))},[k]),i=t.useCallback(function(){a&&a(),window.addEventListener("storage",s,!1);var n=window.screen.width/2-225,o=window.screen.height/2-365;window.open("https://www.linkedin.com/oauth/v2/authorization?response_type="+L+"&client_id="+w+"&scope="+P+"&state="+l+"_linkedin&redirect_uri="+g,"Linkedin","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+o+", left="+n)},[a,s,L,w,P,l,g]);return M.createElement("div",{className:N,onClick:i},d)});t.memo(function(e){var f=e.state,l=f===void 0?"":f,v=e.scope,P=v===void 0?"boards:read,pins:read,user_accounts:read":v,w=e.client_id,S=e.client_secret,_=e.className,N=_===void 0?"":_,g=e.redirect_uri,R=e.isOnlyGetCode,L=R!==void 0&&R,j=e.isOnlyGetToken,I=j!==void 0&&j,b=e.children,c=e.onLoginStart,d=e.onReject,a=e.onResolve;t.useEffect(function(){var s=new URL(window.location.href),i=s.searchParams.get("code"),n=s.searchParams.get("state");n!=null&&n.includes("_pinterest")&&i&&(localStorage.setItem("pinterest",i),window.close())},[]);var u=t.useCallback(function(s){fetch("https://cors.bridged.cc/https://api.pinterest.com/v5/user_account",{method:"GET",headers:{Authorization:"Bearer "+s.access_token,"x-cors-grida-api-key":J}}).then(function(i){return i.json()}).then(function(i){a({provider:"pinterest",data:D({},s,i)})}).catch(function(i){return d(i)})},[d,a]),m=t.useCallback(function(s){try{var i=function(){if(!L){var n={code:s,redirect_uri:g,grant_type:"authorization_code"},o=[];for(var r in n){var h=encodeURIComponent(r),p=encodeURIComponent(n[r]);o.push(h+"="+p)}return o=o.join("&"),Promise.resolve(fetch("https://cors.bridged.cc/https://api.pinterest.com/v5/oauth/token",{method:"POST",headers:{Authorization:"Basic "+btoa(w+":"+S),"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":J},body:o}).then(function(C){return C.json()}).catch(function(C){return d(C)})).then(function(C){C.access_token&&(I?a({provider:"pinterest",data:C}):u(C))})}a({provider:"pinterest",data:{code:s}})}();return Promise.resolve(i&&i.then?i.then(function(){}):void 0)}catch(n){return Promise.reject(n)}},[d,w,u,a,g,S,L,I]),T=t.useCallback(function(s){var i=s.type,n=s.code,o=s.provider;try{return Promise.resolve(i==="code"&&o==="pinterest"&&n&&m(n))}catch(r){return Promise.reject(r)}},[m]),y=t.useCallback(function(){window.removeEventListener("storage",y,!1);var s=localStorage.getItem("pinterest");s&&(T({provider:"pinterest",type:"code",code:s}),localStorage.removeItem("pinterest"))},[T]),k=t.useCallback(function(){c&&c(),window.addEventListener("storage",y,!1);var s=window.screen.width/2-225,i=window.screen.height/2-365;window.open("https://www.pinterest.com/oauth/?client_id="+w+"&scope="+P+"&state="+l+"_pinterest&redirect_uri="+g+"&response_type=code","Pinterest","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+i+", left="+s)},[P,l,w,g,c,y]);return M.createElement("div",{className:N,onClick:k},b)});t.memo(function(e){var f=e.client_id,l=e.className,v=l===void 0?"":l,P=e.redirect_uri,w=e.children,S=e.fields,_=S===void 0?"created_at,description,entities,id,location,name,pinned_tweet_id,profile_image_url,protected,public_metrics,url,username,verified,withheld":S,N=e.state,g=N===void 0?"state":N,R=e.scope,L=R===void 0?"users.read%20tweet.read":R,j=e.isOnlyGetCode,I=j!==void 0&&j,b=e.isOnlyGetToken,c=b!==void 0&&b,d=e.onLoginStart,a=e.onReject,u=e.onResolve;t.useEffect(function(){var i=new URL(window.location.href),n=i.searchParams.get("code");i.searchParams.get("state")&&n&&(localStorage.setItem("twitter",""+n),window.close())},[]);var m=t.useCallback(function(i){fetch("https://cors.bridged.cc/https://api.twitter.com/2/users/me?user.fields="+_,{method:"GET",headers:{Authorization:"Bearer "+i.access_token,"x-cors-grida-api-key":J}}).then(function(n){return n.json()}).then(function(n){u({provider:"twitter",data:D({},i,n.data)})}).catch(function(n){return a(n)})},[_,a,u]),T=t.useCallback(function(i){try{var n=function(){if(!I){var o=new URLSearchParams({code:i,redirect_uri:P,client_id:f,grant_type:"authorization_code",code_verifier:"challenge"});return Promise.resolve(fetch("https://cors.bridged.cc/https://api.twitter.com/2/oauth2/token",{method:"POST",body:o,headers:{"Content-Type":"application/x-www-form-urlencoded","x-cors-grida-api-key":J}}).then(function(r){return r.json()}).catch(function(r){return a(r)})).then(function(r){r.access_token&&(c?u({provider:"twitter",data:r}):m(r))})}u({provider:"twitter",data:{code:i}})}();return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(o){return Promise.reject(o)}},[a,m,u,f,P,I,c]),y=t.useCallback(function(i){var n=i.type,o=i.code,r=i.provider;try{return Promise.resolve(n==="code"&&r==="twitter"&&o&&T(o))}catch(h){return Promise.reject(h)}},[T]),k=t.useCallback(function(){window.removeEventListener("storage",k,!1);var i=localStorage.getItem("twitter");i&&(y({provider:"twitter",type:"code",code:i}),localStorage.removeItem("twitter"))},[y]),s=t.useCallback(function(){try{d&&d(),window.addEventListener("storage",k,!1);var i=window.screen.width/2-225,n=window.screen.height/2-365;return window.open("https://twitter.com/i/oauth2/authorize?response_type=code&client_id="+f+"&redirect_uri="+P+"&scope="+L+"&state="+g+"&code_challenge=challenge&code_challenge_method=plain","twitter","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+n+", left="+i),Promise.resolve()}catch(o){return Promise.reject(o)}},[L,g,f,d,P,k]);return M.createElement("div",{className:v,onClick:s},w)});typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var ae=window,pe=t.memo(function(e){var f=e.client_id,l=e.scope,v=l===void 0?"name email":l,P=e.className,w=P===void 0?"":P,S=e.onLoginStart,_=e.onReject,N=e.onResolve,g=e.redirect_uri,R=g===void 0?"/":g,L=e.children,j=t.useRef(null),I=t.useState(!1),b=I[0],c=I[1];t.useEffect(function(){!b&&m()},[b]),t.useEffect(function(){return function(){j.current&&j.current.remove()}},[]);var d=t.useCallback(function(){return!!document.getElementById("apple-login")},[]),a=t.useCallback(function(y,k,s,i,n){k===void 0&&(k="script");var o=y.createElement(k);o.id=s,o.src=i,o.async=!0,o.defer=!0;var r=document.getElementsByTagName("script")[0];j.current=o,r&&r.parentNode&&r.parentNode.insertBefore(o,r),o.onload=n},[]),u=t.useCallback(function(y){N({provider:"apple",data:y})},[N]),m=t.useCallback(function(){d()?c(!0):a(document,"script","apple-login","https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js",function(){ae.AppleID.auth.init({clientId:f,scope:v,redirectURI:R,state:"origin:web",usePopup:!0}),c(!0)})},[v,f,R,a,d]),T=t.useCallback(function(){try{if(!b)return Promise.resolve();var y=function(){if(ae.AppleID){S&&S();var k=function(s,i){try{var n=Promise.resolve(ae.AppleID.auth.signIn()).then(function(o){u(o)})}catch(o){return i(o)}return n&&n.then?n.then(void 0,i):n}(0,function(s){_({err:s})});if(k&&k.then)return k.then(function(){})}else m(),_("Apple SDK isn't loaded!")}();return Promise.resolve(y&&y.then?y.then(function(){}):void 0)}catch(k){return Promise.reject(k)}},[u,b,m,S,_]);return M.createElement("div",{className:w,onClick:T},L)});t.memo(function(e){var f=e.state,l=f===void 0?"":f,v=e.scope,P=v===void 0?"user.info.basic":v,w=e.client_key,S=e.className,_=S===void 0?"":S,N=e.redirect_uri,g=e.children,R=e.onResolve,L=e.onLoginStart;t.useEffect(function(){var c=new URL(window.location.href),d=c.searchParams.get("code"),a=c.searchParams.get("state");a!=null&&a.includes("_tiktok")&&d&&(localStorage.setItem("tiktok",d),window.close())},[]);var j=t.useCallback(function(c){var d=c.type,a=c.code,u=c.provider;try{return Promise.resolve(d==="code"&&u==="tiktok"&&a&&R({provider:"tiktok",data:{code:a}}))}catch(m){return Promise.reject(m)}},[R]),I=t.useCallback(function(){window.removeEventListener("storage",I,!1);var c=localStorage.getItem("tiktok");c&&(j({provider:"tiktok",type:"code",code:c}),localStorage.removeItem("instagram"))},[j]),b=t.useCallback(function(){L&&L(),window.addEventListener("storage",I,!1);var c=window.screen.width/2-225,d=window.screen.height/2-365;window.open("https://www.tiktok.com/auth/authorize?client_key="+w+"&scope="+P+"&state="+l+"_tiktok&redirect_uri="+N+"&response_type=code","Github","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=450, height=730, top="+d+", left="+c)},[P,l,w,N,L,I]);return M.createElement("div",{className:_,onClick:b},g)});export{pe as b,ue as m,de as u,fe as w};
