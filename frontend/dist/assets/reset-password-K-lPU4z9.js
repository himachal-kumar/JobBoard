import{u as k,j as t,B as d,g as C}from"./mui-aM5Ef8QJ.js";import{c as W,o as I}from"./createStyles-DgF961df.js";import{u as M,c as R,a as i,b as N}from"./forms-C2kV68VR.js";import{h as T,i as V,B as g}from"./index-D7JtJ2Ea.js";import{P as y}from"./PasswordInput-Dp6CrQEg.js";import{u as $}from"./routing-CPJpXWUM.js";import"./vendor-YL3_wyph.js";import"./state-Cg_04vs9.js";const E=R({token:i().required(),password:i().required("Password is required").min(5,"Minimumn 5 chars are required").max(16,"Miximumn 16 chars allowed"),confirmPassword:i().oneOf([N("password")],"Passwords must match").required("Comfirm password is required")}),F=s=>W({root:{maxWidth:400,flex:1,mx:"auto"},input:{mt:2},button:{my:2},link:{color:s.palette.primary.main}});function L(s){var c,u,l,p;const o=k(),a=$(),n=F(o),[P]=T(),[b]=V(),{register:m,handleSubmit:j,formState:{errors:r,isValid:v}}=M({defaultValues:{confirmPassword:"",password:"",token:s.token},resolver:I(E)}),S=async q=>{var w,f,h,x;try{await(s.type==="invite"?b:P)(q).unwrap(),a("/login",{replace:!0}),g.success("Password reset successfully, Please login!")}catch(e){const B=(h=(f=(w=e==null?void 0:e.data)==null?void 0:w.data)==null?void 0:f.errors)==null?void 0:h[0].msg;g.error(B??((x=e==null?void 0:e.data)==null?void 0:x.message)??"Something went wrong!")}};return t.jsx(d,{display:"flex",justifyContent:"center",alignItems:"center",maxWidth:400,mx:"auto",children:t.jsxs(d,{component:"form",onSubmit:j(S),children:[t.jsx(y,{sx:n.input,fullWidth:!0,type:"password",placeholder:"New password",label:"New password",error:!!((c=r.password)!=null&&c.message),helperText:(u=r.password)==null?void 0:u.message,...m("password")}),t.jsx(y,{sx:n.input,fullWidth:!0,type:"password",placeholder:"Confirm password",label:"Confirm password",error:!!((l=r.confirmPassword)!=null&&l.message),helperText:(p=r.confirmPassword)==null?void 0:p.message,...m("confirmPassword")}),t.jsx(C,{type:"submit",sx:n.button,variant:"contained",fullWidth:!0,disabled:!v,children:"Change password"})]})})}function K(){const s=new URLSearchParams(window.location.search),o=s.get("code"),a=s.get("type");return t.jsx(d,{children:t.jsx(L,{token:o,type:a})})}export{K as default};
